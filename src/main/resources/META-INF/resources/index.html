<!DOCTYPE html>
<html lang="en" ng-app="MyVidCoRe">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="MyVidCoRe - Video Converter WebService">
<meta name="author" content="RenÃ© Adler">
<link rel="icon" href="/web/assets/images/favicon.ico">

<title>MyVidCoRe - Video Converter WebService</title>

<!-- Custom styles for this template -->
<link href="/web/assets/css/video-js.min.css" rel="stylesheet">
<link href="/web/assets/css/layout.css" rel="stylesheet">

</head>

<body>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/web"><span class="glyphicon glyphicon-film" aria-hidden="true"></span> MyVidCoRe</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li class="nav-item active"><a class="nav-link" href="/web"><span class="glyphicon
              glyphicon-dashboard" aria-hidden="true"></span>
              {{ 'nav.dashboard' | translate }} <span class="sr-only">(current)</span> </a></li>
          <li class="nav-item"><a class="nav-link" href="/web/settings.html"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> {{
              'nav.settings' | translate }}</a></li>
        </ul>
        <div class="nav navbar-nav navbar-right">
          <span id="directoryWatcherStatus" ng-controller="directoryWatcherStatus" class="label {{status.active ? 'label-success' : 'label-danger'}}">Watcher</span>
        </div>
      </div>
    </div>
  </nav>

  <div class="container">

    <div class="content-container" ng-controller="converterStatus">

      <div id="converter-jobs" class="panel panel-default">
        <div class="panel-heading">{{ 'converter.headline' | translate }}</div>
        <div class="panel-body">
          <div class="row no-jobs" ng-if="(converters | filter:filterDone).length === 0">
            <div class="col-sm-12 text-center">
              <strong>{{ 'converter.noJobs' | translate }}</strong>
            </div>
          </div>
          <div class="row converter" id="converter-{{converter.id}}"
            ng-repeat="converter in converters | filter:filterDone | orderBy:orderByPercent:true track by converter.id"
          >
            <div class="col-sm-12">
              <strong>{{converter.file}}</strong>
            </div>
            <div class="col-sm-12 col-md-10">
              <div class="progress">
                <div class="progress-bar progress-bar-striped {{converter.done ? 'progress-bar-success' : ''}}" ng-class="{active:converter.running}" role="progressbar"
                  aria-valuenow="{{converter.progress.percent}}" aria-valuemin="0" aria-valuemax="100"
                  style="min-width: 2em; width: {{ converter.progress.percent ? converter.progress.percent: 0 }}%"
                >{{converter.progress.percent}}%</div>
              </div>
            </div>
            <div class="col-sm-12 col-md-2 text-right">{{converter.progress.elapsed}} / {{converter.progress.estimate}}</div>
          </div>
        </div>
      </div>

      <div id="converter-done" class="panel panel-default">
        <div class="panel-heading">{{ 'converter.done.headline' | translate }}</div>
        <div class="panel-body">
          <div class="row" ng-if="(converters | filter:filterNotDone).length === 0">
            <div class="col-sm-12 text-center">
              <strong>{{ 'converter.noDoneJobs' | translate }}</strong>
            </div>
          </div>
          <div class="row converter" id="converter-{{converter.id}}"
            ng-repeat="converter in converters | filter:filterNotDone | orderBy:orderByEndTime track by converter.id"
          >
            <div class="col-xs-8 col-sm-7">
              <span class="glyphicon" aria-hidden="true" ng-class="converter.exitValue == 0 ? 'glyphicon-ok text-success' : 'glyphicon-remove text-danger'"></span> <strong>{{converter.file}}</strong>
            </div>
            <div class="col-sm-3 hidden-xs text-right">{{converter.progress.elapsed}}</div>
            <div class="col-xs-4 col-sm-2">
              <div class="btn-group pull-right" role="group">
                <button class="btn btn-xs btn-default" data-toggle="collapse" data-target="#details-{{converter.id}}" aria-expanded="false"
                  aria-controls="details-{{converter.id}}" ng-click="loadDetailData(converter.id)"
                >
                  <span class="glyphicon glyphicon-console" aria-hidden="true"></span>
                </button>
                <button class="btn btn-xs btn-default hidden-xs" data-toggle="collapse" data-target="#preview-{{converter.id}}" aria-expanded="false"
                  aria-controls="preview-{{converter.id}}" ng-disabled="!(converter.file.endsWith('.mp4') || converter.file.endsWith('.webm'))"
                >
                  <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
                </button>
                <a class="btn btn-xs btn-default" href="/widget/converter/{{converter.id}}/download"><span class="glyphicon glyphicon-save" aria-hidden="true"></span>
                </a>
              </div>
            </div>
            <div class="col-md-12 collapse" id="details-{{converter.id}}">
              <pre class="pre-scrollable">{{formatStream(converter.errorStream)}}</pre>
            </div>
            <div class="col-md-12 hidden-xs collapse" id="preview-{{converter.id}}" ng-if="converter.file.endsWith('.mp4') || converter.file.endsWith('.webm')">
              <video id="video-{{converter.id}}" class="video-preview" controls preload="none">
                <source ng-src="{{'/widget/converter/' + converter.id + '/stream'}}">
                <p class="vjs-no-js">
                  To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/"
                    target="_blank"
                  >supports HTML5 video</a>
                </p>
              </video>
            </div>
          </div>
        </div>

      </div>

    </div>
    <!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="/web/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/web/assets/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script type="text/javascript" src="/web/assets/js/ie10-viewport-bug-workaround.js"></script>

    <script type="text/javascript" src="/web/assets/js/angular.min.js"></script>
    <script type="text/javascript" src="/web/assets/js/angular-animate.min.js"></script>
    <script type="text/javascript" src="/web/assets/js/angular-sanitize.min.js"></script>
    <script type="text/javascript" src="/web/assets/js/angular-translate.min.js"></script>
    <script type="text/javascript" src="/web/assets/js/angular-translate-loader-static-files.min.js"></script>
    <script type="text/javascript" src="/web/assets/js/video.min.js"></script>

    <script type="text/javascript" src="/web/assets/js/main.js"></script>
</body>
</html>
