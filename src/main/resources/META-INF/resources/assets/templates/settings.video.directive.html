<div class="form-group">
	<label for="vcodec">{{'settings.codec' | translate}}</label> <select id="vcodec" class="form-control" data-ng-model="video.codec"
		data-ng-change="parent.changeCodec(index, type)"
	>
		<optgroup data-ng-if="codec.encoders && parent.getLength(codec.encoders) > 1" data-ng-repeat="codec in parent.filterCodecs(output.format, 'video')"
			label="{{codec.description}}"
		>
			<option data-ng-repeat="encoder in codec.encoders" value="{{encoder.name}}" data-ng-if="!parent.isFilteredEncoder(encoder, encoderFilter)">{{encoder.description}}
				{{ '(' + encoder.name + ')' }}</option>
		</optgroup>
		<option data-ng-if="codec.encoders && parent.getLength(codec.encoders) == 1 && !parent.isFilteredEncoder(codec.encoders[0], encoderFilter)"
			data-ng-repeat="codec in parent.filterCodecs(output.format, 'video')" value="{{codec.encoders[0].name}}"
		>{{codec.description}} {{ '(' + codec.name + ')' }}</option>
	</select>
</div>

<div class="row"
	data-ng-if="((profile = parent.encoderParameter(selectedCodec[index][type], 'profile') ) && (level = parent.encoderParameter(selectedCodec[index][type], 'level')))"
>
	<div class="form-group col-sm-6">
		<label for="profile">{{'settings.profile' | translate}}</label> <select id="profile" class="form-control" data-ng-model="video.parameter['profile']"
			data-ng-init="video.parameter['profile'] = video.parameter['profile'] || profile.defaultValue"
			data-ng-options="value.name as value.name for value in (profile.values || parent.defaultProfiles)"
		>
			<option value="">{{'settings.auto' | translate}}</option>
		</select>
	</div>
	<div class="form-group col-sm-6">
		<label for="level">{{'settings.level' | translate}}</label> <select id="level" class="form-control" data-ng-model="video.parameter['level']"
			data-ng-init="video.parameter['level'] = video.parameter['level'] || level.defaultValue"
			data-ng-options="value.name as value.name for value in (level.values || parent.defaultLevels)"
		>
			<option value="">{{'settings.auto' | translate}}</option>
		</select>
	</div>
</div>

<div class="form-group" data-ng-if="(preset = parent.encoderParameter(selectedCodec[index][type], 'preset')).values || parent.defaultPresets[video.codec]">
	<label for="preset">{{'settings.preset' | translate}}</label> <select id="preset" class="form-control" data-ng-model="video.parameter['preset']"
		data-ng-init="video.parameter['preset'] = video.parameter['preset'] || preset.defaultValue"
		data-ng-options="value.name as value.name + (value.description !== undefined ? ' (' + value.description + ')' : '') for value in preset.values || parent.defaultPresets[video.codec]"
	>
		<option value="">{{'settings.auto' | translate}}</option>
	</select>
</div>
<div class="form-group" data-ng-if="(tune = parent.encoderParameter(selectedCodec[index][type], 'tune')).values || parent.defaultTunes[video.codec]">
	<label for="tune">{{'settings.tune' | translate}}</label> <select id="tune" class="form-control" data-ng-model="video.parameter['tune']"
		data-ng-init="video.parameter['tune'] = video.parameter['tune'] || tune.defaultValue"
		data-ng-options="value.name as value.name + (value.description !== undefined ? ' (' + value.description + ')' : '') for value in tune.values || parent.defaultTunes[video.codec]"
	>
		<option value="">{{'settings.auto' | translate}}</option>
	</select>
</div>
<div class="form-group" data-ng-if="(selectedCodec[index][type] = selectedCodec[index][type] || parent.filterEncoder(video.codec)).pixelFormats.length > 0">
	<label for="pixelFormat">{{'settings.colorSpace' | translate}}</label> <select id="pixelFormat" class="form-control" data-ng-model="video.pixelFormat"
		data-ng-options="pf as pf for pf in selectedCodec[index][type].pixelFormats"
	>
		<option value="">{{'settings.auto' | translate}}</option>
	</select>
</div>
<div class="form-group">
	<label for="scale">{{'settings.scale' | translate}}</label> <select id="scale" class="form-control" data-ng-model="video.scale"
		data-ng-options="scale.value as scale.name for scale in parent.defaultScales"
	>
		<option value="">{{'settings.auto' | translate}}</option>
	</select>
	<div class="checkbox">
		<label> <input type="checkbox" value="" data-ng-model="video.upscale" data-ng-init="false"> {{'settings.upscaleAllowed' | translate}}
		</label>
	</div>
</div>

<div class="row">
	<div class="col-sm-4">
		<div class="form-group">
			<label for="framerate">{{'settings.framerate' | translate}}</label> <select id="framerate" class="form-control" data-ng-model="video.framerate"
				data-ng-options="fr for fr in selectedCodec[index][type].frameRates || parent.defaultFrameRates"
			>
				<option value="">{{'settings.framerate.auto' | translate}}</option>
			</select>
		</div>
		<div class="radio">
			<label> <input type="radio" id="frTypeVFR" value="VFR" data-ng-model="video.framerateType"
				data-ng-checked="video.framerateType === undefined || video.framerateType == 'VFR'"
			> {{ 'settings.framerate.type.vfr' | translate}}
			</label>
		</div>
		<div class="radio">
			<label> <input type="radio" id="frTypeCFR" value="CFR" data-ng-model="video.framerateType"> {{'settings.framerate.type.cfr' | translate}}
			</label>
		</div>
		<div class="form-group">
			<label for="forceKeyFrames">{{'settings.forceKeyFrames' | translate}}</label>
			<div class="input-group">
				<input id="forceKeyFrames" class="form-control text-right" data-ng-model="video.forceKeyFrames"> <span class="input-group-addon">{{'settings.seconds'
					| translate}}</span>
			</div>
		</div>
	</div>

	<div class="col-sm-4">
		<label>{{'settings.quality' | translate}}</label>
		<div class="radio" data-ng-if="(encoderParameter(selectedCodec[index][type], 'crf'))">
			<label> <input type="radio" id="qTypeCRF" value="CRF" checked data-ng-model="video.quality.type"> {{'settings.quality.type.CRF' | translate}}
				<input id="quality" class="form-control" type="text" data-ng-model="video.quality.rateFactor" data-ng-disabled="video.quality.type != 'CRF'"
				slider="parent.qualityData(selectedCodec[index][type], 'crf', video.quality.rateFactor)"
			/>
			</label>
		</div>
		<div class="radio" data-ng-if="!(encoderParameter(selectedCodec[index][type], 'crf'))">
			<label> <input type="radio" id="qTypeCQ" value="CQ" checked data-ng-model="video.quality.type"> {{'settings.quality.type.CRF' | translate}} <input
				id="quality" class="form-control" type="text" data-ng-model="video.quality.scale" data-ng-disabled="video.quality.type != 'CQ'"
				slider="parent.qualityData(selectedCodec[index][type], 'qscale', video.quality.scale)"
			/>
			</label>
		</div>
		<div class="radio">
			<label> <input type="radio" id="qTypeABR" value="ABR" data-ng-model="video.quality.type"> {{'settings.quality.type.ABR' | translate}}
				<div class="input-group">
					<input type="text" class="form-control text-right" data-ng-model="video.quality.bitrate" data-ng-disabled="video.quality.type != 'ABR'" /> <span
						class="input-group-addon"
					>kbps</span>
				</div>
			</label>
		</div>
	</div>

	<div class="col-sm-4">
		<div class="form-group">
			<label for="minrate">{{'settings.minrate' | translate}}</label>
			<div class="input-group">
				<input id="minrate" class="form-control text-right" data-ng-model="video.quality.minrate"> <span class="input-group-addon">kbps</span>
			</div>
		</div>
		<div class="form-group">
			<label for="maxrate">{{'settings.maxrate' | translate}}</label>
			<div class="input-group">
				<input id="maxrate" class="form-control text-right" data-ng-model="video.quality.maxrate"
					data-ng-change="video.quality.bufsize = video.quality.bufsize !== undefined && video.quality.bufsize > video.quality.maxrate * 2 ? video.quality.bufsize : video.quality.maxrate * 2"
				> <span class="input-group-addon">kbps</span>
			</div>
		</div>
		<div class="form-group">
			<label for="bufsize">{{'settings.bufsize' | translate}}</label>
			<div class="input-group">
				<input id="bufsize" class="form-control text-right" data-ng-model="video.quality.bufsize"> <span class="input-group-addon">kbps</span>
			</div>
		</div>
	</div>
</div>

<settings-advanced-options type="{{type}}" index="index" output="output" codec="selectedCodec"></settings-advanced-options>

<div class="row hidden">
	<div class="form-group col-sm-12">
		<label for="level">{{'settings.advancedOptions' | translate}}</label>
		<textarea class="form-control" rows="3" data-ng-model="video.advancedOptions"></textarea>
	</div>
</div>