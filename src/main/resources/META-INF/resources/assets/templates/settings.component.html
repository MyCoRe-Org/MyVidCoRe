<div id="settings">

	<form novalidate data-ng-if="getLength(formats) > 0">
		<fieldset data-ng-if="hwaccels.length !== 0" data-ng-init="initHWAccelsSettings()">
			<legend>{{'settings.hwaccel' | translate}}</legend>
			<div class="form-group">
				<label>{{'settings.hwBalancing' | translate}}</label>
				<div class="checkbox" data-ng-repeat="hw in hwaccels">
					<label> <input type="checkbox" data-ng-model="settings.hwaccels[$index]" data-ng-checked="checkedHWAccel($index, hw)" data-ng-true-value="{{ hw }}"
						data-ng-false-value="{{ undefined }}"
					>#{{ hw.index }} - {{ hw.name }}
					</label>
				</div>
			</div>
		</fieldset>
		<fieldset>
			<legend>{{'settings.converter.title' | translate}}</legend>
			<ul class="nav nav-tabs" role="tablist">
				<li role="presentation" data-ng-repeat="output in settings.output" data-ng-class="{active:$index == 0, 'remove-btn':$index != 0}"><a
					data-target="#output{{$index}}" aria-controls="output{{$index}}" data-toggle="tab"
				>{{'settings.output' | translate}} {{$index + 1}}</a> <span class="fa fa-remove text-danger" aria-hidden="true" data-ng-if="$index > 0"
					data-ng-click="removeOutput($index)"
				></span></li>
				<li role="presentation"><a data-target="#settings" target="_self" data-ng-click="addOutput()"><span class="fa fa-plus" aria-hidden="true"></span></a></li>
			</ul>
			<div class="tab-content animate">
				<div role="tabpanel" class="tab-pane fade in" data-ng-class="{active:$index == 0}" id="output{{$index}}" data-ng-repeat="output in settings.output">
					<div class="form-group">
						<label for="format">{{'settings.format' | translate}}</label> <select id="format" class="form-control" data-ng-model="output.format"
							data-ng-options="name as format.description for (name, format) in formats"
						>
						</select>
					</div>
					<div class="form-group">
						<label for="appendix">{{'settings.filenameAppendix' | translate}}</label> <input id="appendix" class="form-control"
							data-ng-model="output.filenameAppendix" data-ng-init="'-' + $index"
						>
					</div>

					<ul class="nav nav-tabs" role="tablist" data-ng-hide="!output.format">
						<li role="presentation" class="active"><a data-target="#video{{$index}}" aria-controls="video{{$index}}" data-toggle="tab">Video</a></li>
						<li role="presentation" data-ng-if="hwaccels.length !== 0"><a data-target="#video-fallback{{$index}}" aria-controls="video-fallback{{$index}}"
							data-toggle="tab"
						>Video (Fallback)</a></li>
						<li role="presentation"><a data-target="#audio{{$index}}" aria-controls="audio{{$index}}" data-toggle="tab">Audio</a></li>
					</ul>
					<div class="tab-content" data-ng-hide="!output.format">
						<div role="tabpanel" class="tab-pane fade in active" id="video{{$index}}">
							<settings-video type="video" index="$index" parent="this" output="output" video="output.video"></settings-video>
						</div>
						<div role="tabpanel" class="tab-pane fade" id="video-fallback{{$index}}" data-ng-if="hwaccels.length !== 0">
							<settings-video type="video-fallback" index="$index" parent="this" output="output" video="output['video-fallback']" encoder-filter="['nvenc']"></settings-video>
						</div>
						<div role="tabpanel" class="tab-pane fade" id="audio{{$index}}">
							<settings-audio type="audio" index="$index" parent="this" output="output" audio="output.audio"> </settings-audio>
						</div>
					</div>
				</div>
			</div>
			<div class="pull-right clear-fix">
				<button type="submit" class="btn btn-default btn-primary" data-ng-click="save(settings)" data-ng-disabled="!settings.options.length == 0">{{
					'btn.save' | translate}}</button>
			</div>
		</fieldset>
	</form>

</div>